import{element,bootstrap,isFunction,module}from"angular";import{__rest,__extends}from"tslib";import"reflect-metadata";var Declaration,platformBrowserDynamic=function(){return PlatformRef},PlatformRef=function(){function e(){}return e.bootstrapModule=function(e,t){var a;switch(void 0===t&&(t={strictDi:!1}),typeof e){case"string":a=e;break;case"object":a=e.name;break;case"function":default:var n=e.module;if(!n)throw Error("Argument moduleType should be NgModule class, angular.module object or module name string");a=n.name}var r=!0===t.strictDi;element(document).ready(function(){bootstrap(document.body,[a],{strictDi:r})})},e}(),ElementRef=function(){return function(e){return e.nativeElement=e[0],e}}();!function(e){e.Component="Component",e.Directive="Directive",e.Pipe="Pipe"}(Declaration||(Declaration={}));var metadataKeys={declaration:"custom:declaration",name:"custom:name",bindings:"custom:bindings",require:"custom:require",options:"custom:options",listeners:"custom:listeners",viewChildren:"custom:viewChildren"};function kebabToCamel(e){return e.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}function camelToKebab(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function getAttributeName(e){return e.substr(1,e.length-2)}function isAttributeSelector(e){return/^[\[].*[\]]$/g.test(e)}function getMetadata(e,t){return Reflect.getMetadata(e,t)}function defineMetadata(e,t,a){Reflect.defineMetadata(e,t,a)}function getTypeName(e){return getMetadata(metadataKeys.name,e)}function getTypeDeclaration(e){return getMetadata(metadataKeys.declaration,e)}var ngLifecycleHooksMap={ngOnInit:"$onInit",ngOnDestroy:"$onDestroy",ngDoCheck:"$doCheck",ngOnChanges:"$onChanges",ngAfterViewInit:"$postLink"};function Component(e){var t=e.selector,a=__rest(e,["selector"]);return function(e){a.controller=e;var n=isAttributeSelector(t),r=getMetadata(metadataKeys.bindings,e);r&&(n?(a.bindToController=r,a.controllerAs=a.controllerAs||"$ctrl"):a.bindings=r);var o=getMetadata(metadataKeys.require,e);o&&(a.require=o),n&&(a.restrict="A"),replaceLifecycleHooks(e);var i=n?getAttributeName(t):t;defineMetadata(metadataKeys.name,kebabToCamel(i),e),defineMetadata(metadataKeys.declaration,n?Declaration.Directive:Declaration.Component,e),defineMetadata(metadataKeys.options,a,e)}}function registerComponent(e,t){var a=getMetadata(metadataKeys.name,t),n=getMetadata(metadataKeys.options,t),r=getMetadata(metadataKeys.listeners,n.controller),o=getMetadata(metadataKeys.viewChildren,t);(r||o)&&(n.controller=extendWithHostListenersAndChildren(n.controller,r,o)),e.component(a,n)}function extendWithHostListenersAndChildren(e,t,a){void 0===t&&(t={}),void 0===a&&(a={});var n=Object.keys(t),r=Object.keys(a),o=function(e){function o(t){for(var a=[],n=1;n<arguments.length;n++)a[n-1]=arguments[n];var r=e.apply(this,a)||this;return r.$element=t,r}return __extends(o,e),o.prototype._updateViewChildren=function(){var e=this;r.forEach(function(t){var n,r=a[t];if("string"!=typeof r.selector){var o=getTypeDeclaration(r.selector);if(o!==Declaration.Component&&o!==Declaration.Directive)return;n=camelToKebab(getTypeName(r.selector))}else n="#"+r.selector;var i=Array.prototype.slice.call(e.$element[0].querySelectorAll(n)).map(function(e){var t="string"==typeof r.selector?e.localName:n,a=element(e),o=a&&a.controller(kebabToCamel(t));return r.read?new ElementRef(a):o||new ElementRef(a)}).filter(function(e){return!!e});i.length?e[t]=r.first?i[0]:i:e[t]=void 0})},o.prototype.$postLink=function(){var a=this;e.prototype.$postLink&&e.prototype.$postLink.call(this),n.forEach(function(e){var n=t[e].eventName;a.$element.on(n+".HostListener",a[e].bind(a))}),this._updateViewChildren()},o.prototype.$onChanges=function(t){e.prototype.$onChanges&&e.prototype.$onChanges.call(this,t),this._updateViewChildren()},o.prototype.$onDestroy=function(){e.prototype.$onDestroy&&e.prototype.$onDestroy.call(this),n.length&&this.$element.off(".HostListener")},o}(e);return o.$inject=["$element"].concat(e.$inject||[]),o}function replaceLifecycleHooks(e){var t=e.prototype;getHooksOnCtrlClass(t).forEach(function(e){var a=ngLifecycleHooksMap[e];t[a]=t[e]})}function getHooksOnCtrlClass(e){return Object.keys(ngLifecycleHooksMap).filter(function(t){return isFunction(e[t])})}function Directive(e){var t=e.selector,a=__rest(e,["selector"]);return function(e){var n=getMetadata(metadataKeys.bindings,e);n&&(a.bindToController=n);var r=getMetadata(metadataKeys.require,e);r&&(a.require=r,a.bindToController||(a.bindToController=!0)),a.restrict=a.restrict||"A";var o=isAttributeSelector(t)?getAttributeName(t):t;defineMetadata(metadataKeys.name,kebabToCamel(o),e),defineMetadata(metadataKeys.declaration,Declaration.Directive,e),defineMetadata(metadataKeys.options,a,e)}}function registerDirective(e,t){var a,n=getMetadata(metadataKeys.name,t),r=getMetadata(metadataKeys.options,t);replaceLifecycleHooks(t);var o=getMetadata(metadataKeys.listeners,t),i=getMetadata(metadataKeys.viewChildren,t);r.controller=o||i?extendWithHostListenersAndChildren(t,o,i):t,a=function(){return r},e.directive(n,a)}function Injectable(e){return function(t){e&&defineMetadata(metadataKeys.name,e,t)}}function Inject(e){return function(t,a,n){a&&Array.isArray(t[a])?t[a][n]=e:t.$inject&&(t.$inject[n]=e)}}function registerProviders(e,t){t.forEach(function(t){if(t.provide){var a=t.provide;t.useClass&&t.useClass instanceof Function?e.service(a,t.useClass):t.useFactory&&t.useFactory instanceof Function?(t.useFactory.$inject=t.deps||t.useFactory.$inject,e.factory(a,t.useFactory)):t.useValue?e.constant(a,t.useValue):t.useExisting&&e.provider(a,t.useExisting)}else{var n=getMetadata(metadataKeys.name,t);n&&e.service(n,t)}})}function Pipe(e){return function(t){defineMetadata(metadataKeys.name,e.name,t),defineMetadata(metadataKeys.declaration,Declaration.Pipe,t)}}function registerPipe(e,t){var a=getMetadata(metadataKeys.name,t),n=function(){for(var e=[],a=0;a<arguments.length;a++)e[a]=arguments[a];var n=e[0].instantiate(t);return n.transform.bind(n)};n.$inject=["$injector"].concat(t.$inject||[]),e.filter(a,n)}function Input(e){return function(t,a){return addBindingToMetadata(t,a,"<?",e)}}function Output(e){return function(t,a){return addBindingToMetadata(t,a,"&",e)}}function ViewParent(e){return function(t,a){return addRequireToMetadata(t,a,e)}}function addBindingToMetadata(e,t,a,n){var r=e.constructor,o=getMetadata(metadataKeys.bindings,r)||{};o[t]=n||a,defineMetadata(metadataKeys.bindings,o,r)}function addRequireToMetadata(e,t,a){var n=e.constructor,r=getMetadata(metadataKeys.require,n)||{};r[t]=a,defineMetadata(metadataKeys.require,r,n)}function NgModule(e){var t=e.id,a=(e.bootstrap,e.declarations),n=void 0===a?[]:a,r=e.imports,o=void 0===r?[]:r,i=e.providers,c=void 0===i?[]:i;return function(e){var a=o.map(function(e){return"string"==typeof e?e:e.module.name});t||(t=e.name);var r=module(t,a);n.forEach(function(e){switch(getMetadata(metadataKeys.declaration,e)){case Declaration.Component:registerComponent(r,e);break;case Declaration.Directive:registerDirective(r,e);break;case Declaration.Pipe:registerPipe(r,e)}}),c&&registerProviders(r,c);var i=e.config,s=e.run;i&&r.config(i),s&&r.run(s),e.module=r}}function HostListener(e,t){return function(a,n,r){var o=r.value;if("function"!=typeof o)throw new Error("@HostListener decorator can only be applied to methods not: "+typeof o);var i=a.constructor,c=getMetadata(metadataKeys.listeners,i)||{};c[n]={eventName:e,args:t},defineMetadata(metadataKeys.listeners,c,i)}}function ViewChild(e,t){return void 0===t&&(t={}),function(a,n){return addBindingToMetadata$1(a,n,e,t.read,!0)}}function ViewChildren(e,t){return void 0===t&&(t={}),function(a,n){return addBindingToMetadata$1(a,n,e,t.read,!1)}}function addBindingToMetadata$1(e,t,a,n,r){var o=e.constructor,i=getMetadata(metadataKeys.viewChildren,o)||{};i[t]={first:r,selector:a,read:n},defineMetadata(metadataKeys.viewChildren,i,o)}var Type=Function;function isType(e){return"function"==typeof e}export{Component,Declaration,Directive,ElementRef,HostListener,Inject,Injectable,Input,NgModule,Output,Pipe,Type,ViewChild,ViewChildren,ViewParent,camelToKebab,defineMetadata,getAttributeName,getMetadata,getTypeDeclaration,getTypeName,isAttributeSelector,isType,kebabToCamel,metadataKeys,ngLifecycleHooksMap,platformBrowserDynamic};